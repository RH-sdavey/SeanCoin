{% extends 'base.html' %}

{% block mainTitleSpan %}
<h1>Crypto Price Charts {{ crypto }}</h1>
{% endblock %}


{% block crumbs %}
{% endblock %}

{% block body %}
<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Crypto Data Since 2020</h5>
                <script>
                    document.addEventListener("DOMContentLoaded", () => {
                      const series = {
                        "dates": {{ date_range|safe }},
                        "coin": {
                          "name": "{{ data['name'] }}",
                          "prices": {{ data['close'] }},
                          "volume": {{ data['volume'] }},
                          "open_close_diff": {{ data['diff']|safe }}
                        }
                      }
                      new ApexCharts(document.querySelector("#priceChart"), {
                        series: [
                            {
                              name: series.coin.name,
                              data: series.coin.prices
                            },
                        ],
                        chart: {
                          type: 'area',
                          height: 350,
                          zoom: {
                            enabled: false
                          }
                        },
                        dataLabels: {
                          enabled: false
                        },
                        stroke: {
                          curve: 'straight'
                        },
                        subtitle: {
                          text: 'Price',
                          align: 'left'
                        },
                        xaxis: {
                          type: 'datetime',
                          categories: series.dates
                        },
                        yaxis: {
                          opposite: true
                        },
                        legend: {
                          horizontalAlign: 'left'
                        }
                      }).render();
                    });
                </script>
                <div id="priceChart"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
